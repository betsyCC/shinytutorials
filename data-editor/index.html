<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/shinytutorials/styles.e0512c1b080a97ea3693.css">code[class*=language-],pre[class*=language-]{color:#a9b7c6;font-family:Consolas,Monaco,Andale Mono,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{color:inherit;background:rgba(33,66,131,.85)}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2b2b2b}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.prolog{color:grey}.token.atrule,.token.boolean,.token.delimiter,.token.important,.token.keyword,.token.selector{color:#cc7832}.token.attr-name,.token.operator,.token.punctuation{color:#a9b7c6}.token.builtin,.token.doctype,.token.tag,.token.tag .punctuation{color:#e8bf6a}.token.entity,.token.number,.token.symbol{color:#6897bb}.token.constant,.token.property,.token.variable{color:#9876aa}.token.char,.token.string{color:#6a8759}.token.attr-value,.token.attr-value .punctuation{color:#a5c261}.token.attr-value .punctuation:first-child{color:#a9b7c6}.token.url{color:#287bde;text-decoration:underline}.token.function{color:#ffc66d}.token.regex{background:#364135}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.inserted{background:#294436}.token.deleted{background:#484a4a}code.language-css .token.property,code.language-css .token.property+.token.punctuation{color:#a9b7c6}code.language-css .token.id,code.language-css .token.selector>.token.attribute,code.language-css .token.selector>.token.class,code.language-css .token.selector>.token.pseudo-class,code.language-css .token.selector>.token.pseudo-element{color:#ffc66d}body,html{padding:0;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;cursor:default;background-color:#fff;font-size:18px}article,footer,header,main{padding:0;margin:0;display:block}h1,h2,h3,h4,h5,h6{display:block;color:#252525;line-height:1.4;padding:0;margin:0 0 6px}a,li,p,time{color:#3f454b;line-height:1.9}a{text-decoration:none;box-shadow:0 -1px solid #3f454b}blockquote{line-height:1.9;color:#3f454b}form{padding:16px 0;border-bottom:1px solid #ccc}form,label{display:block}label{margin-bottom:6px}input{width:90%;font-size:12pt;padding:8px 8px 8px 12px;border-radius:0;background-color:#f5f7fa;box-shadow:inset 0 2px 2px #bbc9dd}button,input{-webkit-appearance:none;-moz-appearance:none;appearance:none;display:block;border:none}button{margin:8px 0 8px -8px;padding:4px 0 4px 8px;font-size:14px;outline:none;background-color:transparent;cursor:pointer;transition:all .2s ease-in-out;border-left:3px solid transparent}button.menu-btn.selected,button.menu-btn:focus,button.menu-btn:hover{color:#5c80bc;font-weight:600;border-left-color:#5c80bc}button.reset{border:1px solid #3f454b;color:#3f454b;padding:8px 12px;margin-left:24px}button.reset:focus,button.reset:hover{background-color:#3f454b;color:#f0f0f0}img{width:100%}img,pre code{display:block}pre code{padding:6px 8px}div.gatsby-highlight{margin:32px 0}.header{position:fixed;top:0;width:100%;text-align:center;background-color:#fff;box-shadow:0 2px 6px rgba(0,0,0,.3);z-index:15}.header .header-link{display:inline-block;padding-top:12px;font-weight:600;letter-spacing:1.5px}.header .header-icon{display:inline-block;width:16px;height:16px;padding:0 6px;fill:#3f454b}.header .header-link:hover{color:#5c80bc;fill:#5c80bc;box-shadow:inset 0 -4px 0 #5c80bc}.header .header-link:hover .header-icon{fill:#5c80bc}.hero{width:100%;padding:44px 0;display:-webkit-flex;display:flex;position:relative;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center;background-color:#fff;overflow:hidden}.hero .hero-content{width:85%;padding:44px 0;z-index:12}.hero .hero-content h2{color:#3f454b;font-weight:600;font-size:21px;letter-spacing:1.2px}.hero .hero-content time{font-size:16px;font-weight:600}.hero .hero-content hr{display:block;margin:6px 0 12px;width:210px;border:none;border-bottom:3px solid #5c80bc;opacity:.25}.hero.index-hero .hero-content .hero-image{display:block;width:300px;margin:44px auto;box-shadow:0 12px 3px -6px rgba(0,0,0,.3)}.hero.index-hero:before{top:-30%;-webkit-transform:rotate(8deg);transform:rotate(8deg)}.hero.index-hero:after,.hero.index-hero:before{content:" ";position:absolute;width:250%;height:60%;background-color:#5c80bc;right:-60%}.hero.index-hero:after{opacity:.25;top:-25%;-webkit-transform:rotate(6.5deg);transform:rotate(6.5deg)}.hero.tutorial-hero:before{width:160%;-webkit-transform:rotate(-18deg);transform:rotate(-18deg)}.hero.tutorial-hero:after,.hero.tutorial-hero:before{content:" ";position:absolute;height:45%;background-color:#5c80bc;bottom:-30%;right:-60%}.hero.tutorial-hero:after{width:170%;opacity:.25;-webkit-transform:rotate(-14deg);transform:rotate(-14deg)}.tutorial-block{padding:32px 0;background-color:#f5f7fa;min-height:60vh}.tutorial-nav{padding:32px 16px}.tutorial-nav .menu-title{margin-left:24px}.tutorial-nav .menu{list-style:none;padding:0;margin:0 0 44px 24px}.tutorial-nav .menu .menu-item{width:200px;padding:0 24px 0 0;margin-bottom:12px;cursor:pointer}.tutorial-nav .action-link{margin-left:24px}.tutorial-list{padding:0}.tutorial-list .tutorial-list-content{padding:24px 0 24px 16px;background-color:#fff}.post{display:block;padding:32px 0;border-bottom:1px solid #ccc}.post:last-child{border-bottom:none}.post .post-title{text-decoration:underline}.post .post-title:hover{color:#5c80bc}.post .post-desc{width:77%}.post .post-date{font-size:14px;font-family:consolas,courier,sans-serif}.post-tags-list,.post .post-date{display:inline-block;color:#3f454b}.post-tags-list{padding:0;margin:0 0 0 18px;list-style:none}.post-tags-list li{display:inline;margin-left:12px;padding:5px 10px;border-radius:5px;font-size:14px;background-color:#f9f4f0;font-family:consolas,courier,sans-serif}.post-tags-list li:before{content:"#"}.main{background-color:#f5f7fa;padding-bottom:44px;min-height:71.4vh}.tutorial-post{display:block;position:relative;background-color:#fff;padding:16px 32px 44px;max-width:792px;margin:50px auto 0;box-shadow:0 3px 4px rgba(0,0,0,.3);z-index:10}.tutorial-post blockquote{background-color:#f5f7fa;padding:16px 24px;margin:44px 0;border-left:10px solid #5c80bc}.tutorial-post .tutorial-body h2{padding:0;margin:32px 0 0}.tutorial-post .tutorial-body a{color:#5c80bc;text-decoration:underline}.tutorial-post .tutorial-body img{margin:32px 0}.main .tutorial-post .tutorial-body ol li,.main .tutorial-post .tutorial-body ol li a,.main .tutorial-post .tutorial-body ol li p,.main .tutorial-post .tutorial-body ul li,.main .tutorial-post .tutorial-body ul li a,.main .tutorial-post .tutorial-body ul li p{margin:0;padding:0}.main .tutorial-post .tutorial-body ol li ol{list-style:lower-latin}.main .tutorial-post .tutorial-footer{border-top:1px solid #ccc;padding:16px 0}.main .tutorial-post .tutorial-footer .post-tags-list{margin-left:0}.footer{margin:0;padding:44px 0;background-color:#33404d}.footer p{color:inherit;text-align:center}.footer .external-links{margin:0;text-align:center}.footer .external-links .link{display:inline-block;width:200px;margin:0 24px;border-radius:4px}.footer .external-links .link .nav-link{position:relative;color:#fff;fill:#fff;box-shadow:inset 0 -1px 0 #fff}.footer .external-links .link .nav-link svg{position:absolute;height:18px;width:18px;top:2px;left:-24px}.four-o-four-page{width:90%;margin:44px auto}.four-o-four-page svg{border:1px solid brown;box-shadow:-1px 5px 4px 2px rgba(37,37,37,.2);padding:25px;-webkit-transform:scale(1.5);transform:scale(1.5);background-color:#fff;border-radius:100%;margin:2em}@media screen and (min-width:900px){input{width:80%}.hero .hero-content{width:50%}.tutorial-nav{-ms-grid-column:1;-ms-grid-row:1;grid-column:1;grid-row:1;grid-area:nav;padding:88px 32px 32px;position:-webkit-sticky;position:sticky;top:0;height:100px}.tutorial-block{display:-ms-grid;display:grid;-ms-grid-columns:25% 75%;grid-template-columns:25% 75%;grid-template-areas:"nav list";padding:32px 0;background-color:#f5f7fa;min-height:100vh}.tutorial-list{-ms-grid-column:2;-ms-grid-row:1;grid-column:2;grid-row:1;grid-area:list}.tutorial-list .tutorial-list-content{width:75%;padding:34px 44px;box-shadow:0 0 4px 2px rgba(0,0,0,.3)}.tutorial-post{padding:16px 44px 44px}.four-o-four-page{width:60%;text-align:center}}</style><meta name="generator" content="Gatsby 2.2.10"/><title data-react-helmet="true"></title><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/shinytutorials/webpack-runtime-86ead2c0ae58cf9ea4f4.js"/><link as="script" rel="preload" href="/shinytutorials/app-7ae387d919581d6e6c2f.js"/><link as="script" rel="preload" href="/shinytutorials/styles-fa947043799cbb3b0c3c.js"/><link as="script" rel="preload" href="/shinytutorials/component---src-components-tutorials-js-8a25aaa364f2a9c642aa.js"/><link as="fetch" rel="preload" href="/shinytutorials/static/d/798/path---data-editor-9-ac-422-UgztQddrIXJqPgvVmOxcO1NbYY.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><header class="header"><a class="header-link" href="/shinytutorials/"><svg class="header-icon" viewBox="0 0 576 512"><path d="M570.24 247.41L512 199.52V104a8 8 0 0 0-8-8h-32a8 8 0 0 0-7.95 7.88v56.22L323.87 45a56.06 56.06 0 0 0-71.74 0L5.76 247.41a16 16 0 0 0-2 22.54L14 282.25a16 16 0 0 0 22.53 2L64 261.69V448a32.09 32.09 0 0 0 32 32h128a32.09 32.09 0 0 0 32-32V344h64v104a32.09 32.09 0 0 0 32 32h128a32.07 32.07 0 0 0 32-31.76V261.67l27.53 22.62a16 16 0 0 0 22.53-2L572.29 270a16 16 0 0 0-2.05-22.59zM463.85 432H368V328a32.09 32.09 0 0 0-32-32h-96a32.09 32.09 0 0 0-32 32v104h-96V222.27L288 77.65l176 144.56z"></path></svg>shinyTutorials</a></header><main class="main" id="content" aria-label="main content"><main class="main" id="content" aria-label="main content"><header class="hero tutorial-hero"><div class="hero-content"><svg class="svg-image" width="210" height="100" viewBox="0 0 210 100"><rect x="10" y="40" width="40" height="80" fill="#5C80BC"></rect><rect x="60" y="20" width="40" height="100" fill="#5C80BC"></rect><rect x="110" y="50" width="40" height="70" fill="#5C80BC"></rect><rect x="160" y="80" width="40" height="40" fill="#5C80BC"></rect></svg><hr/><h2>Data Editor</h2><h1>A shiny app for editing data in a shiny app</h1><time>1 March 2018</time></div></header><article class="tutorial-post"><section class="tutorial-body" aria-label="post content"><h2>Contents</h2>
<ol>
<li><a href="#data-editor-about">Why would I need this?</a></li>
<li><a href="#data-editor-work">How does the app work?</a></li>
<li><a href="#data-editor-run">How can I run the demo?</a></li>
</ol>
<span id="data-editor-about"/>
<h2>Why would I need this?</h2>
<p>This app was created in order to figure out a question I've had for a
while: "How can I edit a dataset in a shiny app?"</p>
<p>A data editor would be useful as this would
allow you to keep a master dataset (source of truth) and an archive of all
versions. This would be help fix typos that occurred during the data entry process
or allow you to make other necessary changes (e.g., name changes, modifying a value if it was entered incorrectly,
updating information, etc.) on the fly rather than writting script to recode a value at column X, row Y. </p>
<p>In this tutorial, we will learn how to build a basic data editor in a
shiny using the rhandsontable package. Here's a preview of what we
will make.</p>
<p><img src="https://raw.githubusercontent.com/davidruvolo51/shinyAppTutorials/master/Data-Editor/data-editor.gif" alt="a video showing how to edit and save changes in a data table"></p>
<span id="data-editor-work" />
<h2>How does the app work?</h2>
<p>The app was developed with the help of vignettes in the wonderful
rhandsontable package, various features in the shinyBS and
shinyJS packages. In this example, we will using the <code>mtcars</code>
dataset.</p>
<p>To make the app work, there's a base file <code>cars data.RDS</code> that we will use as our source of truth.</p>
<h3>Building the UI</h3>
<p>First things first - let's setup the ui. We will use a sidebar
layout for our app. We also create a set of buttons that will be used
for triggering the editor and for saving data. We will define the
following buttons</p>
<ul>
<li>view: button to display the table as is (without editing
privileges)</li>
<li>edit: button to render table as a rhandsontable output</li>
<li>cancel: button to discard all edits and return back to the
normal table</li>
<li>save: button to save all edits</li>
<li>refresh: button to refresh the app (pull all changes in to the
default view)</li>
</ul>
<p>We will also create two modals. The first modal will be triggered when
the save button is clicked and will ask, are you sure you want to
save the changes?. If the user clicks yes, then the save function
will run. Once the file is saved, a confirmation dialogue will appear
(all changes were saved) and prompting you to refresh the app to view
the changes.</p>
<p>Here's what our ui looks like.</p>
<h3>Building the UI</h3>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">ui <span class="token operator">&lt;-</span> shinyUI<span class="token punctuation">(</span>

    fluidPage<span class="token punctuation">(</span>
        
        <span class="token comment"># shinyjs</span>
        useShinyjs<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        extendShinyjs<span class="token punctuation">(</span>text <span class="token operator">=</span> <span class="token string">"shinyjs.refresh = function(){history.go(0);}"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        
        <span class="token comment"># title</span>
        titlePanel<span class="token punctuation">(</span><span class="token string">"Data Editor"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        
        <span class="token comment"># set layout</span>
        sidebarLayout<span class="token punctuation">(</span>
            
            <span class="token comment"># sidebarpanel</span>
            sidebarPanel<span class="token punctuation">(</span>
                
                <span class="token comment"># text + buttons</span>
                helpText<span class="token punctuation">(</span><span class="token string">"What would you like to do?"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                actionButton<span class="token punctuation">(</span><span class="token string">"view"</span><span class="token punctuation">,</span> label <span class="token operator">=</span> <span class="token string">"view"</span><span class="token punctuation">,</span> icon <span class="token operator">=</span> icon<span class="token punctuation">(</span><span class="token string">"binoculars"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                actionButton<span class="token punctuation">(</span><span class="token string">"edit"</span><span class="token punctuation">,</span> label <span class="token operator">=</span> <span class="token string">"edit"</span><span class="token punctuation">,</span> icon <span class="token operator">=</span> icon<span class="token punctuation">(</span><span class="token string">"pencil"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                actionButton<span class="token punctuation">(</span><span class="token string">"cancel"</span><span class="token punctuation">,</span> label <span class="token operator">=</span> <span class="token string">"cancel"</span><span class="token punctuation">,</span> icon <span class="token operator">=</span> icon<span class="token punctuation">(</span><span class="token string">"times"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                actionButton<span class="token punctuation">(</span><span class="token string">"save"</span><span class="token punctuation">,</span> label <span class="token operator">=</span> <span class="token string">"save"</span><span class="token punctuation">,</span> icon <span class="token operator">=</span> icon<span class="token punctuation">(</span><span class="token string">"save"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                actionButton<span class="token punctuation">(</span><span class="token string">"refresh"</span><span class="token punctuation">,</span> label <span class="token operator">=</span> <span class="token string">"refresh"</span><span class="token punctuation">,</span> icon <span class="token operator">=</span> icon<span class="token punctuation">(</span><span class="token string">"refresh"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                
                <span class="token comment"># modal: confirm changes</span>
                bsModal<span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"saveChanges"</span><span class="token punctuation">,</span> 
                        title <span class="token operator">=</span> <span class="token string">"Do you want to save changes?"</span><span class="token punctuation">,</span>
                        trigger <span class="token operator">=</span>  <span class="token string">"save"</span><span class="token punctuation">,</span> 
                        size <span class="token operator">=</span> <span class="token string">"small"</span><span class="token punctuation">,</span>
                        <span class="token comment"># text + buttons</span>
                        wellPanel<span class="token punctuation">(</span>
                            helpText<span class="token punctuation">(</span><span class="token string">"Saving will overwrite existing data! This cannot be undone."</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            actionButton<span class="token punctuation">(</span>inputId <span class="token operator">=</span> <span class="token string">"no"</span><span class="token punctuation">,</span> label <span class="token operator">=</span>  <span class="token string">"No"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            actionButton<span class="token punctuation">(</span>inputId <span class="token operator">=</span> <span class="token string">"yes"</span><span class="token punctuation">,</span> label <span class="token operator">=</span> <span class="token string">"Yes"</span><span class="token punctuation">)</span>
                        <span class="token punctuation">)</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
                
                <span class="token comment"># modal: notification</span>
                bsModal<span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"okay"</span><span class="token punctuation">,</span> 
                        title <span class="token operator">=</span> <span class="token string">"Save was successful!"</span><span class="token punctuation">,</span> 
                        trigger <span class="token operator">=</span> <span class="token string">"yes"</span><span class="token punctuation">,</span> 
                        size <span class="token operator">=</span> <span class="token string">"small"</span><span class="token punctuation">,</span>
                        
                        <span class="token comment"># notification</span>
                        wellPanel<span class="token punctuation">(</span>
                                helpText<span class="token punctuation">(</span><span class="token string">"Changes were saved successfully. Refresh the page for changes to take effect."</span><span class="token punctuation">)</span>
                        <span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
                                
            <span class="token comment"># main panel</span>
            mainPanel<span class="token punctuation">(</span>
                                    
                <span class="token comment"># orientation text: current mode - view vs edit</span>
                uiOutput<span class="token punctuation">(</span><span class="token string">"helperText"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                hr<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                    
                <span class="token comment"># table outputs</span>
                dataTableOutput<span class="token punctuation">(</span><span class="token string">"table"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                rHandsontableOutput<span class="token punctuation">(</span><span class="token string">"hot"</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<p>Now let's move over to the server.</p>
<h3>Building the server</h3>
<p>Let's set the defaults. In our app, we've created a helperText
element that will allow us to pass messages to the UI. This is useful
for letting the user know which mode they are currently in (e.g., view
or edit). We will set a default message to view. We will also set
the default dataTableOutput to render our dataset as is. Also by
default, we will hide the cancel, save, and refresh buttons
as these buttons are only necessary in editing mode. There are also
a few events for showing and hiding buttons. I won't go into detail in
this guide. The source code is self explanatory.</p>
<p>The most important default is preparing an object to process the changes
from the editing mode. We will create a reactiveValue object and call it
values. Here's what our server setup looks like when we put in all
of the default parameters. We will set up the observeEvents for all of
the buttons. Also we will also define the logic for loading in the
dataset.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token comment"># logic for loading data file using mtcars</span>
testFile <span class="token operator">&lt;-</span> <span class="token string">"cars_data.rds"</span>


<span class="token comment"># if our data file exists, otherwise create it!</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>file.exists<span class="token punctuation">(</span>testFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    mtcarsDF <span class="token operator">&lt;-</span> readRDS<span class="token punctuation">(</span><span class="token string">"cars_data.rds"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    mtcarsDF <span class="token operator">&lt;-</span> mtcars
    row.names<span class="token punctuation">(</span>mtcarsDF<span class="token punctuation">)</span> <span class="token operator">&lt;-</span> <span class="token keyword">NULL</span>
    mtcarsDF<span class="token operator">$</span>car <span class="token operator">&lt;-</span> row.names<span class="token punctuation">(</span>mtcars<span class="token punctuation">)</span>
    mtcarsDF <span class="token operator">&lt;-</span> mtcarsDF<span class="token punctuation">[</span><span class="token punctuation">,</span>c<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>


<span class="token comment"># server </span>
server <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> output<span class="token punctuation">,</span> session<span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token comment"># orientation text: mode - view vs edit</span>
    output<span class="token operator">$</span>helperText <span class="token operator">&lt;-</span> renderUI<span class="token punctuation">(</span><span class="token punctuation">{</span>
        h3<span class="token punctuation">(</span><span class="token string">"View Mode"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                                
    <span class="token comment"># datatable: view</span>
    output<span class="token operator">$</span>table <span class="token operator">&lt;-</span> DT<span class="token operator">::</span>renderDataTable<span class="token punctuation">(</span><span class="token punctuation">{</span>
        DT<span class="token operator">::</span>datatable<span class="token punctuation">(</span>mtcarsDF<span class="token punctuation">,</span> selection <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                                
    <span class="token comment"># initiate values for edits</span>
    values <span class="token operator">=</span> reactiveValues<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># refresh page</span>
    observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>refresh<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        js<span class="token operator">$</span>refresh<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment"># if view or cancel is clicked, go back to default view</span>
    observeEvent<span class="token punctuation">(</span><span class="token punctuation">{</span>input<span class="token operator">$</span>view input<span class="token operator">$</span>cancel<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token ellipsis">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment"># switch to editing mode</span>
    observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>edit<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token ellipsis">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment"># save changes</span>
    observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>yes<span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token ellipsis">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The events for view, cancel, and refresh are pretty straightforward.
These events show and hide buttons, as well refresh the view. Let's
focus on the events for editing and saving</p>
<h3>Editing Mode</h3>
<p>When the user clicks the edit button, the displayed table switches to an
rhandsontable output. The following code allows us to make changes and
directly render the changes in the ui. It also stores the changes into
our reactive object values.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>edit<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token ellipsis">...</span>

    <span class="token comment"># make data.frame of edits</span>
    data <span class="token operator">&lt;-</span> reactive<span class="token punctuation">(</span><span class="token punctuation">{</span>
    
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>is.null<span class="token punctuation">(</span>input<span class="token operator">$</span>hot<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            DF <span class="token operator">&lt;-</span> hot_to_r<span class="token punctuation">(</span>input<span class="token operator">$</span>hot<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>is.null<span class="token punctuation">(</span>values<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"DF"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                DF <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>mtcarsDF<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                DF <span class="token operator">&lt;-</span> values<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"DF"</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
                            
        values<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"DF"</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> DF
        DF
                            
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                        
    <span class="token comment"># render table</span>
    output<span class="token operator">$</span>hot <span class="token operator">&lt;-</span> renderRHandsontable<span class="token punctuation">(</span><span class="token punctuation">{</span>
        DF <span class="token operator">=</span> data<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>is.null<span class="token punctuation">(</span>DF<span class="token punctuation">)</span><span class="token punctuation">)</span>
            rhandsontable<span class="token punctuation">(</span>DF<span class="token punctuation">,</span> stretchH <span class="token operator">=</span> <span class="token string">"all"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<h3>Saving Changes</h3>
<p>In this app, we've defined the save process as:</p>
<ol>
<li>Create a backup of the master file we will rename our current
master file to include a timestamp (the time the save event was
triggered).</li>
<li>Create a new master file: Now that we've created a backup of
our master, we can now create a new master file that includes all of
the changes we made. The present method saves the changes to a
.RDS file. Alternatively, you can write the changes to csv or
your preferred place (e.g., googlesheets, mongoDB, etc.).</li>
</ol>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token comment"># When yes is clicked, save data as RDS</span>
observeEvent<span class="token punctuation">(</span>input<span class="token operator">$</span>save<span class="token punctuation">,</span><span class="token punctuation">{</span>
                        
    finalDF <span class="token operator">&lt;-</span> isolate<span class="token punctuation">(</span>values<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"DF"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment"># write data + backup current version</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>file.exists<span class="token punctuation">(</span><span class="token string">"cars_data.RDS"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        
        <span class="token comment"># rename current master file</span>
        file.rename<span class="token punctuation">(</span>
            from <span class="token operator">=</span> <span class="token string">"cars_data.RDS"</span><span class="token punctuation">,</span>
            to <span class="token operator">=</span> paste0<span class="token punctuation">(</span><span class="token string">"cars_data_"</span><span class="token punctuation">,</span>format<span class="token punctuation">(</span>Sys.time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"%Y%m%d-%H%M%S"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">".RDS"</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
                        
        <span class="token comment"># write edits to file</span>
        saveRDS<span class="token punctuation">(</span>mtcarsDF<span class="token punctuation">,</span> file <span class="token operator">=</span> <span class="token string">"cars_data.RDS"</span><span class="token punctuation">)</span>
                        
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    
        <span class="token comment"># save data if a master file isn't present</span>
        saveRDS<span class="token punctuation">(</span>mtcarsDF<span class="token punctuation">,</span> file <span class="token operator">=</span> <span class="token string">"cars_data.RDS"</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Once the save event runs, the user will receive a notification saying
that the file was saved and will inform the user to refresh the page.
When the page is refreshed, the master file will be reloaded and the
previous version will be uneffected. Creating backups is a good way to
track changes in the data. The timestamp is formated to:
yyyymmdd-HHMMSS. Seconds may not be necessary in all cases; adjust as
required.</p>
<span id="data-editor-run" />
<h2>How can I run the demo? {#data-editor-run}</h2>
<p>The source code is available on
<a href="https://github.com/davidruvolo51/shinyAppTutorials/tree/master/Data-Editor">github</a>.
Alternatively, you can run the demo in R using the following code.</p>
<div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r"><span class="token comment"># Run in R/Rstudio</span>
install.packages<span class="token punctuation">(</span><span class="token string">"shiny"</span><span class="token punctuation">)</span>
shiny<span class="token operator">::</span>runGitHub<span class="token punctuation">(</span>repo<span class="token operator">=</span><span class="token string">"shinyAppTutorials"</span><span class="token punctuation">,</span>username<span class="token operator">=</span><span class="token string">"davidruvolo51"</span><span class="token punctuation">,</span>subdir<span class="token operator">=</span><span class="token string">"Data-Editor"</span><span class="token punctuation">)</span></code></pre></div></section><footer class="tutorial-footer"><time>2018-03-01</time><ul class="post-tags-list"><li class="post-tag">rhandsontable</li></ul></footer></article></main></main><footer class="footer"><ul class="external-links"><li class="link"><a class="nav-link" href="https://github.com/davidruvolo51/shinytutorials" aria-label="github.com/davidruvolo51"><svg aria-hidden="true" height="30" width="30" role="img" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>View on GitHub</a></li><li class="link"><a class="nav-link" href="https://www.twitter.com/dcruvolo" aria-label="twitter.com/dcruvolo"><svg aria-hidden="true" height="30" width="30" role="img" viewBox="0 0 24 24"><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg>Follow me on twitter</a></li></ul></footer></div></div><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/,/^(?:\/do\-not\-track\/me\/too\/)$/];
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-76117337-11',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-76117337-11', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-components-tutorials-js","jsonName":"data-editor-9ac","path":"/data-editor/"};window.dataPath="798/path---data-editor-9-ac-422-UgztQddrIXJqPgvVmOxcO1NbYY";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-7ae387d919581d6e6c2f.js"],"component---src-components-tutorials-js":["/component---src-components-tutorials-js-8a25aaa364f2a9c642aa.js"],"component---src-pages-404-js":["/component---src-pages-404-js-375f5e11d46d4654e393.js"],"component---src-pages-index-js":["/component---src-pages-index-js-f5fdbdb8afdd279e007e.js"],"pages-manifest":["/pages-manifest-90e5471c5389b1c80617.js"]};/*]]>*/</script><script src="/shinytutorials/component---src-components-tutorials-js-8a25aaa364f2a9c642aa.js" async=""></script><script src="/shinytutorials/styles-fa947043799cbb3b0c3c.js" async=""></script><script src="/shinytutorials/app-7ae387d919581d6e6c2f.js" async=""></script><script src="/shinytutorials/webpack-runtime-86ead2c0ae58cf9ea4f4.js" async=""></script></body></html>